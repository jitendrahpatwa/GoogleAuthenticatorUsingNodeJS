console.log("ok");

var speakeasy = require('speakeasy');

var secret = speakeasy.generateSecret({length: 20});
console.log(secret.base32); 
//NAXGQTT2OVPDC4KKLIQS6PR4OI4XESDW //store somewhere we use in app.js

var QRCode = require('qrcode');

QRCode.toDataURL(secret.otpauth_url, function(err, image_data) {
  console.log(image_data); // A data URI for the QR code image
});
//data:image/png;base64,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

//ref https://davidwalsh.name/2fa
//ref git https://github.com/speakeasyjs/speakeasy